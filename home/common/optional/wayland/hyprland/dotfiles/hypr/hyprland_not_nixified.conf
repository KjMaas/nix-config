##############
## HYPRLAND ##
##############

# set variables
$mainMod = SUPER
$terminal = kitty
$graphicalFileBrowser = thunar
$locker = swaylock
# colorscheme
$base00 = 2E3440ff #2E3440
$base01 = 3B4252ff #3B4252
$base02 = 434C5Eff #434C5E
$base03 = 4C566Aff #4C566A
$base04 = D8DEE9ff #D8DEE9
$base05 = E5E9F0ff #E5E9F0
$base06 = ECEFF4ff #ECEFF4
$base07 = 8FBCBBff #8FBCBB
$base08 = BF616Aff #BF616A
$base09 = D08770ff #D08770
$base0A = EBCB8Bff #EBCB8B
$base0B = A3BE8Cff #A3BE8C
$base0C = 88C0D0ff #88C0D0
$base0D = 81A1C1ff #81A1C1
$base0E = B48EADff #B48EAD
$base0F = 5E81ACff #5E81AC

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Start scripts
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
exec-once = ~/.config/hypr/scripts/batterywarning.sh

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Screen Sharing
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Ensure that xdg-desktop-portal-hyprland can get the required variables on startup:
exec-once = dbus-update-activation-environment --systemd --all
exec-once = systemctl --user import-environment QT_QPA_PLATFORMTHEME

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Bluetooth
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
exec-once = blueman-applet

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Wallpaper
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# ToDo: version wallpapers
exec-once = hyprpaper
# swww supports gifs, but is curently broken ðŸ˜¥
# exec-once = swww init && swww img /home/klaasjan/Pictures/Wallpapers/custom/nixos_01.jpg

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Lockscreen
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
bind = $mainMod SHIFT, x,  exec, $locker

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# set Environement Variables
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
env = XDG_CURRENT_DESKTOP, Hyprland
env = XDG_SESSION_DESKTOP, Hyprland

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Status bar
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# launch waybar on startup
exec-once = waybar
# Toggle waybar
bind = $mainMod SHIFT, F1, exec, pkill -USR1 waybar

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# dmenu
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
$menu = rofi -show
bind = $mainMod SHIFT, d, exec, $menu
bind = $mainMod SHIFT, c, exec, $menu calc
bind = $mainMod SHIFT, e, exec, $menu emoji -matching normal

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Graphical File Browser
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
bind = $mainMod CTRL, f, exec, $graphicalFileBrowser

# See https://wiki.hyprland.org/Configuring/Monitors/
# monitor = eDP-1, 2560x1440@120, 0x0, 1.5
monitor = eDP-1, 1920x1080@60, 0x0, 1

# Some default env vars.
env = XCURSOR_SIZE, 24

# For all categories, see https://wiki.hyprland.org/Configuring/Variables/
input {
    kb_layout = eu
    kb_variant = 
    kb_model =
    kb_options =
    kb_rules =

    follow_mouse = 1
    mouse_refocus = false

    touchpad {
        disable_while_typing = true
        natural_scroll = yes
    }

    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
}

general {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more
    gaps_in = 3
    gaps_out = 5
    border_size = 2
    col.active_border = rgba($base03) rgba($base0A) 90deg
    col.inactive_border = rgba($base00) rgba($base0C) 90deg

    layout = dwindle

    resize_on_border = true
}

# Layout Change
bind = SUPER, SPACE, exec, hyprctl keyword general:layout "dwindle"
bind = SUPER, SPACE, exec, hyprctl notify 1 1000 "rgb(ffffff)" " Dwindle"
bind = SUPER SHIFT, SPACE, exec, hyprctl keyword general:layout "master"
bind = SUPER SHIFT, SPACE, exec, hyprctl notify 1 1000 "rgb(ffffff)" " Master"


decoration {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more

    rounding = 5
    active_opacity = 0.95
    inactive_opacity = 0.70
    fullscreen_opacity = 1.0

    blur {
      enabled = true
      new_optimizations = true
      xray = true
      size = 3
      passes = 1
    }

    drop_shadow = false
    shadow_range = 5
    shadow_render_power = 2
    dim_inactive = true
    dim_strength = 0.2
    col.shadow = rgba(1aeeeaee)
    col.shadow_inactive = rgba(eeaaeaee)
}

animations {
    enabled = yes

    # Some default animations, see https://wiki.hyprland.org/Configuring/Animations/ for more
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05

    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = borderangle, 1, 8, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}

bind = $mainMod, F1, exec, ~/.config/hypr/scripts/savebatterylife.sh

dwindle {
    # See https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more
    pseudotile = true
    bind =  SUPER, p, pseudo
    bind =  SUPER CTRL, P, exec, hyprctl dispatch workspaceopt allpseudo

    default_split_ratio = 1.0
    force_split = 2 # always split to the right (new = right or bottom)
    preserve_split = true # you probably want this
    pseudotile = true
    no_gaps_when_only = false

    permanent_direction_override = true
    bind =  $mainMod CTRL, k, layoutmsg, preselect u 
    bind =  $mainMod CTRL, l, layoutmsg, preselect r 
    bind =  $mainMod CTRL, j, layoutmsg, preselect d 
    bind =  $mainMod CTRL, h, layoutmsg, preselect l 

    bind = $mainMod, E, togglesplit, 
}

master {
    new_is_master = false
    allow_small_split = true
    no_gaps_when_only = false
    bind =  $mainMod, n, layoutmsg, orientationnext
    bind =  $mainMod SHIFT, N, layoutmsg, orientationprev
    bind =  $mainMod, a, layoutmsg, addmaster
    bind =  $mainMod SHIFT, A, layoutmsg, removemaster
}

# See https://wiki.hyprland.org/Configuring/Variables/ for more
gestures {
    workspace_swipe = true
    workspace_swipe_forever = true
}

misc {
  force_default_wallpaper = 0

  layers_hog_keyboard_focus = false
  new_window_takes_over_fullscreen = 2

  # allows fixing the "Red screen of death"
  allow_session_lock_restore = true

  # mouse stuff
  animate_manual_resizes = false
  animate_mouse_windowdragging = false
  cursor_zoom_factor = 1
  hide_cursor_on_touch = true
  mouse_move_focuses_monitor = true
}

binds {
    workspace_back_and_forth = true
    workspace_center_on = 1
}

# Example binds, see https://wiki.hyprland.org/Configuring/Binds/ for more
bind = $mainMod_SHIFT, Q, killactive, 
bind = $mainMod SHIFT, ESCAPE, exit, 
bind = $mainMod, V, togglefloating, 
# Fullscreen
bind = $mainMod, F, fullscreen, 1
bind = $mainMod SHIFT, F, fullscreen, 0
bind = $mainMod, B, workspace, previous
bind = $mainMod SHIFT, B, movewindow, workspace, previous
bind = $mainMod SHIFT CTRL, F, pin # pin a floating window

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Terminal Windows
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
bind = $mainMod, return, exec, $terminal -1  -o allow_remote_control=yes
bind = $mainMod SHIFT, T, exec, $terminal btop
# floating terminal window
bind = $mainMod SHIFT, return, exec, $terminal --title="floating terminal" -o allow_remote_control=yes
windowrulev2 = float, class:($terminal), title:(floating terminal)
windowrulev2 = size 720 500, class:($terminal), title:(floating terminal)
windowrulev2 = center, class:($terminal), title:(floating terminal)
windowrulev2 = opaque, class:($terminal), title:(floating terminal)
windowrulev2 = noblur, class:($terminal), title:(floating terminal)
windowrulev2 = bordercolor rgba($base09) rgba($base0E), class:($terminal), title:(floating terminal)

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Other Window rules
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Picture in Picture
windowrulev2 = float, title:(Picture in picture)
windowrulev2 = size 500 300, title:(Picture in picture)
windowrulev2 = center, title:(Picture in picture)
windowrulev2 = move 100%-510 100%-350, title:(Picture in picture)
windowrulev2 = pin, title:(Picture in picture)
windowrulev2 = opaque, title:(Picture in picture)
windowrulev2 = nodim, title:(Picture in picture)
windowrulev2 = bordercolor rgba($base04) rgba($base0F), title:(Picture in picture)
windowrulev2 = noinitialfocus, title:(Picture in picture)
windowrulev2 = forcergbx, title:(Picture in picture)

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Keyboard controls (brightness, media, sound, etc)
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Brightness
bind = , XF86MonBrightnessUp, exec, light -A 10
bind = , XF86MonBrightnessDown, exec, light -U 5
# Sound
bind = , XF86AudioRaiseVolume, exec, pamixer -i 2
bind = , XF86AudioLowerVolume, exec, pamixer -d 2
bind = , XF86AudioMute, exec, pamixer -t


# Move focus
bind = $mainMod, h, movefocus, l
bind = $mainMod, l, movefocus, r
bind = $mainMod, k, movefocus, u
bind = $mainMod, j, movefocus, d
# Swap windows
bind = $mainMod SHIFT, h, movewindow, l
bind = $mainMod SHIFT, l, movewindow, r
bind = $mainMod SHIFT, k, movewindow, u
bind = $mainMod SHIFT, j, movewindow, d
# Switch workspaces
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move active window to a workspace
bind = $mainMod SHIFT, 1, movetoworkspacesilent, 1
bind = $mainMod SHIFT, 2, movetoworkspacesilent, 2
bind = $mainMod SHIFT, 3, movetoworkspacesilent, 3
bind = $mainMod SHIFT, 4, movetoworkspacesilent, 4
bind = $mainMod SHIFT, 5, movetoworkspacesilent, 5
bind = $mainMod SHIFT, 6, movetoworkspacesilent, 6
bind = $mainMod SHIFT, 7, movetoworkspacesilent, 7
bind = $mainMod SHIFT, 8, movetoworkspacesilent, 8
bind = $mainMod SHIFT, 9, movetoworkspacesilent, 9
bind = $mainMod SHIFT, 0, movetoworkspacesilent, 10
bind = $mainMod SHIFT, B, movetoworkspacesilent, previous
# Move active window to "special/scratchpad" workspace
bind = $mainMod SHIFT CTRL, RETURN, movetoworkspace, special
bind = $mainMod SHIFT CTRL, BACKSPACE, movetoworkspace, e+0
bind = $mainMod SHIFT CTRL, SPACE, togglespecialworkspace

# Scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

bind = $mainMod, R, submap, resize
submap = resize
bind = , l, resizeactive, 100 0
bind = , h, resizeactive, -100 0
bind = , k, resizeactive, 0 -100
bind = , j, resizeactive, 0 100
bind = , escape, submap, reset 
bind = $mainMod, R, submap, reset
submap = reset

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Tabbed windows
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
bind = $mainMod, t, togglegroup
bind = $mainMod SHIFT, t, lockactivegroup, toggle

bind = $mainMod CTRL, h, changegroupactive, b
bind = $mainMod CTRL, l, changegroupactive, f

bind = $mainMod CTRL SHIFT, h, movegroupwindow, b
bind = $mainMod CTRL SHIFT, l, movegroupwindow, f

bind = $mainMod CTRL SHIFT, l, moveintogroup, r
bind = $mainMod CTRL SHIFT, h, moveintogroup, l
bind = $mainMod CTRL SHIFT, j, moveintogroup, u
bind = $mainMod CTRL SHIFT, k, moveintogroup, d

bind = $mainMod CTRL SHIFT, j, moveoutofgroup, u
bind = $mainMod CTRL SHIFT, k, moveoutofgroup, d

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Clipboard
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Start the clipboard manager in the background
exec wl-paste -t text --watch clipman store
# Select a clipboard entry using rofi
bind = $mainMod SHIFT, p, exec, clipman pick -t rofi

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# ScreenShots
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Take a screenshot of a part of the screen
bind = $mainMod SHIFT, s, exec, grim -g "$(slurp)" -t png - | swappy -f - | wl-copy

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Color Picker
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
bind = $mainMod, c, exec, hyprpicker --autocopy --format=hex

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Notification Daemon
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
exec-once = mako
bind = CTRL,       Space, exec, makoctl dismiss
bind = CTRL SHIFT, Space, exec, makoctl dismiss --all

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Brave profiles
# [i]ncognito  persona[l]  [p]ro  [c]ampus
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
bind = $mainMod SHIFT, W, submap, braveprofiles
submap = braveprofiles
bind = , i, exec, brave --incognito
bind = , i, submap, reset
bind = , l, exec, brave --profile-directory=Default
bind = , l, submap, reset
bind = , p, exec, brave --profile-directory=Profile\ 1
bind = , p, submap, reset
bind = , c, exec, brave --profile-directory=Profile\ 2
bind = , c, submap, reset
bind = , escape, submap, reset 
submap = reset
